<template name="ManagerDashboard">
  {{>pageHeader heading="Fund manager"}}
  <div class="row">
    <div class="col-12">
      {{#card title="Fund capacity"}}
        <div class="display-4">
          {{#unless eq state.balance null}}
            {{balance}}
          {{else}}
            ...
          {{/unless}}
        </div>
      {{/card}}
    </div>
    <div class="col-md">
      {{#card title="Agents registry" loading=(eq state.agents null)}}
        <ul class="list-group list-group-flush">
          {{#each state.agents}}
            <li class="list-group-item">
              <div class="d-flex justify-content-between">
                <div>{{name}} from {{location}}</div>
                <div class="text-break text-center">{{shortHash agentAddress}}</div>
                <div class="text-break text-right">
                  {{#if approved}}
                    <button class="btn btn-sm btn-outline-success disabled">
                      {{>i fa='check'}}
                      Approved
                    </button>
                  {{else if rejected}}
                    <button class="btn btn-sm btn-outline-danger disabled">
                      {{>i fa='times'}}
                      Rejected
                    </button>
                  {{else}}
                    <button
                      class="btn btn-sm btn-success {{#if state.working}}disabled{{/if}}"
                      data-action="approveAgent">
                      {{>i fa='check'}}
                      Approve
                    </button>
                    <button
                      class="btn btn-sm btn-danger {{#if state.working}}disabled{{/if}}"
                      data-action="rejectAgent">
                      {{>i fa='times'}}
                      Reject
                    </button>
                  {{/if}}
                </div>
              </div>
            </li>
          {{else}}
            <li class="list-group-item text-center text-muted">No Agents found</li>
          {{/each}}
        </ul>
      {{/card}}
    </div>
    <div class="col-md">
      {{#card title="Funding requests" loading=(eq state.requests null)}}
        <ul class="list-group list-group-flush">
          {{#each state.requests}}
            <li class="list-group-item">
              <div class="d-flex justify-content-between">
                <div class="text-break">{{shortHash agentAddress}}</div>
                <div class="text-break">{{shortHash assertionId}}</div>
                <div>
                  <a href="#" class="btn btn-sm btn-warning">
                    {{>i fa='ban'}}
                    Challenge
                  </a>
                </div>
              </div>
            </li>
          {{else}}
            <li class="list-group-item text-center text-muted">No Funding requests found</li>
          {{/each}}
        </ul>
      {{/card}}
    </div>
  </div>
</template>